

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Using OpenStreetMap (OSM) &#8212; Global Infrastructure Risk Assesments</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'howto/using_osm';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Using Local Data" href="using_tailor_data.html" />
    <link rel="prev" title="Run Locally" href="run_locally.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/IVM_logo_kort.jpg" class="logo__image only-light" alt="Global Infrastructure Risk Assesments - Home"/>
    <script>document.write(`<img src="../_static/IVM_logo_kort.jpg" class="logo__image only-dark" alt="Global Infrastructure Risk Assesments - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">The Basics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../intro/ci_explained.html">Critical Infrastructure Explained</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/hazard.html">Hazard &amp; Hazard Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/exposure.html">Exposure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/vulnerability.html">Vulnerability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/damage_risk.html">Damage &amp; Risk</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">How it works</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="damagescanner.html">Introducing <code class="docutils literal notranslate"><span class="pre">DamageScanner()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="run_locally.html">Run Locally</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Using OpenStreetMap (OSM)</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_tailor_data.html">Using Local Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="maximum_damages.html">Maximum Damages Explained</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_preparation.html">Specific Data Preparations</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_overview.html">Overview of Examples</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">By Infrastructure System</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../ci/transport.html">Transportation Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ci/power.html">Power Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ci/telecom.html">Telecommunication Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ci/healthcare.html">Healthcare Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ci/education.html">Education Infrastructure</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">By Natural Hazard</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../hazard/flood.html">Flood risk assessment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hazard/earthquake.html">Earthquake Risk Assessment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hazard/wildfire.html">Wildfire exposure assessment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hazard/heatwaves.html">Extreme Heat</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hazard/tropical_cyclone.html">Tropical Cyclone Risk Assessment</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Specific Use Cases</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../use_cases/all_ci_exposure.html">Country-level exposure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use_cases/all_ci_vulnerability.html">Country-level vulnerability assessment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use_cases/all_ci_risk.html">Country-level risk assessment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use_cases/multi-country.html">Multi-country Analysis for Transportation Infrastructure</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/VU-IVM/GlobalInfraRisk" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/VU-IVM/GlobalInfraRisk/issues/new?title=Issue%20on%20page%20%2Fhowto/using_osm.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/howto/using_osm.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Using OpenStreetMap (OSM)</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#downloading-openstreetmap-osm-data">Downloading OpenStreetMap (OSM) Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-the-download-function">Using the <code class="docutils literal notranslate"><span class="pre">download()</span></code> Function</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#example-usage">Example Usage:</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#handling-countries-not-in-the-dictionary">Handling Countries Not in the Dictionary</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#using-geopandas-with-a-bounding-box-simpler-approach"><strong>1. Using GeoPandas with a Bounding Box (Simpler Approach)</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#using-osm-flex-for-advanced-clipping"><strong>2. Using OSM-Flex for Advanced Clipping</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#extracting-data-with-read-osm-data">Extracting Data with <code class="docutils literal notranslate"><span class="pre">read_osm_data()</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-retrieving-road-network-data">Example: Retrieving Road Network Data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-retrieving-building-footprints">Example: Retrieving Building Footprints</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-the-maximum-damage-dataframe">Creating the Maximum Damage DataFrame</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#linking-vulnerability-curves">Linking Vulnerability Curves</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-note-on-osm-completeness">A Note On OSM Completeness</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#some-current-insights-on-osm-completeness"><strong>Some Current Insights on OSM Completeness</strong></a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="using-openstreetmap-osm">
<h1>Using OpenStreetMap (OSM)<a class="headerlink" href="#using-openstreetmap-osm" title="Permalink to this heading">#</a></h1>
<p>OpenStreetMap (OSM) is used as a basis for analysis because it provides infrastructure data globally. This enables an initial assessment, such as hotspot analysis, in relation to natural hazard risks. Data can be obtained from <a class="reference external" href="https://download.geofabrik.de/">Geofabrik</a> or extracted using the Overpass API. This notebook demonstrates how we use the <a class="reference external" href="https://github.com/VU-IVM/DamageScanner/blob/DS1.0/src/damagescanner/osm.py"><code class="docutils literal notranslate"><span class="pre">read_osm_data()</span></code></a> to retrieve specific assets for analysis.</p>
<p>For further details on tailoring local and regional data, refer to <a class="reference external" href="https://vu-ivm.github.io/GlobalInfraRisk/howto/using_tailor_data.html">this page</a>.</p>
<p>The function supports the following infrastructure systems:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">asset_types</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;roads&quot;</span><span class="p">,</span>
    <span class="s2">&quot;rail&quot;</span><span class="p">,</span>
    <span class="s2">&quot;air&quot;</span><span class="p">,</span>
    <span class="s2">&quot;telecom&quot;</span><span class="p">,</span>
    <span class="s2">&quot;water_supply&quot;</span><span class="p">,</span>
    <span class="s2">&quot;waste_solid&quot;</span><span class="p">,</span>
    <span class="s2">&quot;waste_water&quot;</span><span class="p">,</span>
    <span class="s2">&quot;education&quot;</span><span class="p">,</span>
    <span class="s2">&quot;healthcare&quot;</span><span class="p">,</span>
    <span class="s2">&quot;power&quot;</span><span class="p">,</span>
    <span class="s2">&quot;gas&quot;</span><span class="p">,</span>
    <span class="s2">&quot;oil&quot;</span><span class="p">,</span>
    <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<section id="downloading-openstreetmap-osm-data">
<h2>Downloading OpenStreetMap (OSM) Data<a class="headerlink" href="#downloading-openstreetmap-osm-data" title="Permalink to this heading">#</a></h2>
<section id="using-the-download-function">
<h3>Using the <code class="docutils literal notranslate"><span class="pre">download()</span></code> Function<a class="headerlink" href="#using-the-download-function" title="Permalink to this heading">#</a></h3>
<p>To obtain OpenStreetMap (OSM) data for a specific country, we use the <code class="docutils literal notranslate"><span class="pre">download.get_country_geofabrik()</span></code> function from the <a class="reference external" href="https://github.com/VU-IVM/DamageScanner/blob/DS1.0/src/damagescanner/download.py"><strong>DamageScanner.download</strong></a> module (originally developed within the <a class="reference external" href="https://osm-flex.readthedocs.io/en/latest/index.html"><strong>osm-flex</strong></a> package). This function retrieves country-specific <code class="docutils literal notranslate"><span class="pre">.osm.pbf</span></code> files from <a class="reference external" href="https://download.geofabrik.de/">Geofabrik</a>, a widely used source for regional OSM extracts.</p>
<section id="example-usage">
<h4>Example Usage:<a class="headerlink" href="#example-usage" title="Permalink to this heading">#</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">damagescanner</span><span class="w"> </span><span class="kn">import</span> <span class="n">download</span>

<span class="c1"># Define the country code (ISO 3166-1 alpha-3)</span>
<span class="n">country_iso3</span> <span class="o">=</span> <span class="s2">&quot;NLD&quot;</span>  <span class="c1"># Example: Netherlands</span>

<span class="c1"># Retrieve the OSM data file path</span>
<span class="n">features</span> <span class="o">=</span> <span class="n">download</span><span class="o">.</span><span class="n">get_country_geofabrik</span><span class="p">(</span><span class="n">country_iso3</span><span class="p">)</span>
</pre></div>
</div>
<p>This function requires the <strong>ISO3 country code</strong>, which is used to match available datasets. The dictionary of supported country codes is found in the <strong>DamageScanner config file</strong>:</p>
<p>ðŸ“Œ <strong><a class="reference external" href="https://github.com/VU-IVM/DamageScanner/blob/DS1.0/src/damagescanner/config.py#L46">View the country dictionary</a></strong></p>
</section>
</section>
<section id="handling-countries-not-in-the-dictionary">
<h3>Handling Countries Not in the Dictionary<a class="headerlink" href="#handling-countries-not-in-the-dictionary" title="Permalink to this heading">#</a></h3>
<p>If a country is not listed in the dictionary, it means that a predefined extract is unavailable, and a <strong>custom clip</strong> is required from a larger regional or continental file. There are two primary approaches to achieving this:</p>
<section id="using-geopandas-with-a-bounding-box-simpler-approach">
<h4><strong>1. Using GeoPandas with a Bounding Box (Simpler Approach)</strong><a class="headerlink" href="#using-geopandas-with-a-bounding-box-simpler-approach" title="Permalink to this heading">#</a></h4>
<p>The most recent <code class="docutils literal notranslate"><span class="pre">geopandas.read_file()</span></code> function allows users to clip a dataset to a specific <strong>bounding box (bbox)</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>

<span class="c1"># Load a larger OSM dataset (e.g., Europe extract)</span>
<span class="n">osm_data</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s2">&quot;path/to/europe-latest.osm.pbf&quot;</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">))</span>
</pre></div>
</div>
<p>ðŸ“Œ <strong><a class="reference external" href="https://geopandas.org/en/stable/docs/reference/api/geopandas.read_file.html">GeoPandas read_file Documentation</a></strong></p>
</section>
<section id="using-osm-flex-for-advanced-clipping">
<h4><strong>2. Using OSM-Flex for Advanced Clipping</strong><a class="headerlink" href="#using-osm-flex-for-advanced-clipping" title="Permalink to this heading">#</a></h4>
<p>For more precise extraction based on administrative boundaries or complex geometries, the <strong>osm-flex</strong> package provides a tailored clipping approach:</p>
<p>ðŸ“Œ <strong><a class="reference external" href="https://osm-flex.readthedocs.io/en/latest/1_clipping_shapes.html">OSM-Flex Clipping Documentation</a></strong></p>
<p>This method is more advanced and allows for detailed customization of OSM extracts beyond simple bounding boxes.</p>
</section>
</section>
</section>
<section id="extracting-data-with-read-osm-data">
<h2>Extracting Data with <code class="docutils literal notranslate"><span class="pre">read_osm_data()</span></code><a class="headerlink" href="#extracting-data-with-read-osm-data" title="Permalink to this heading">#</a></h2>
<p>The <a class="reference external" href="https://github.com/VU-IVM/DamageScanner/blob/DS1.0/src/damagescanner/osm.py#L406"><code class="docutils literal notranslate"><span class="pre">read_osm_data()</span></code></a> function processes <code class="docutils literal notranslate"><span class="pre">.osm.pbf</span></code> files and extracts data related to predefined asset types. It applies OSM query filters stored in <a class="reference external" href="https://github.com/VU-IVM/DamageScanner/blob/DS1.0/src/damagescanner/osm.py#L12"><code class="docutils literal notranslate"><span class="pre">DICT_CIS_OSM</span></code></a> to select relevant infrastructure features.</p>
<section id="example-retrieving-road-network-data">
<h3>Example: Retrieving Road Network Data<a class="headerlink" href="#example-retrieving-road-network-data" title="Permalink to this heading">#</a></h3>
<p>When extracting data, OSM-based attribute columns (e.g., <code class="docutils literal notranslate"><span class="pre">highway</span></code> for roads) are automatically converted into a standardized <code class="docutils literal notranslate"><span class="pre">object_type</span></code> column. This ensures consistency when linking extracted data to vulnerability curves and maximum damage values.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">damagescanner.osm</span><span class="w"> </span><span class="kn">import</span> <span class="n">read_osm_data</span>

<span class="c1"># Define file path and asset type</span>
<span class="n">osm_file</span> <span class="o">=</span> <span class="s2">&quot;path/to/osm_data.osm.pbf&quot;</span>
<span class="n">asset_type</span> <span class="o">=</span> <span class="s2">&quot;roads&quot;</span>

<span class="c1"># Extract road network data</span>
<span class="n">gdf_roads</span> <span class="o">=</span> <span class="n">read_osm_data</span><span class="p">(</span><span class="n">osm_file</span><span class="p">,</span> <span class="n">asset_type</span><span class="p">)</span>

<span class="c1"># Display first few rows</span>
<span class="nb">print</span><span class="p">(</span><span class="n">gdf_roads</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
</section>
<section id="example-retrieving-building-footprints">
<h3>Example: Retrieving Building Footprints<a class="headerlink" href="#example-retrieving-building-footprints" title="Permalink to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Extract building footprints</span>
<span class="n">gdf_buildings</span> <span class="o">=</span> <span class="n">read_osm_data</span><span class="p">(</span><span class="n">osm_file</span><span class="p">,</span> <span class="s2">&quot;buildings&quot;</span><span class="p">)</span>

<span class="c1"># Display first few rows</span>
<span class="nb">print</span><span class="p">(</span><span class="n">gdf_buildings</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
</section>
</section>
<section id="creating-the-maximum-damage-dataframe">
<h2>Creating the Maximum Damage DataFrame<a class="headerlink" href="#creating-the-maximum-damage-dataframe" title="Permalink to this heading">#</a></h2>
<p>To link OSM data with damage assessments, maximum reconstruction costs must be defined per infrastructure type. These values must align with the <code class="docutils literal notranslate"><span class="pre">object_type</span></code> column in the extracted OSM dataset. Maximum damage values should be validated using expert input or literature sources.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="c1"># Define maximum reconstruction costs</span>
<span class="n">max_damage_data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;object_type&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;primary&#39;</span><span class="p">,</span> <span class="s1">&#39;secondary&#39;</span><span class="p">,</span> <span class="s1">&#39;tertiary&#39;</span><span class="p">],</span>
    <span class="s1">&#39;max_reconstruction_cost_per_meter&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">750</span><span class="p">,</span> <span class="mi">500</span><span class="p">]</span>  <span class="c1"># Example values in currency units per meter</span>
<span class="p">}</span>

<span class="c1"># Create DataFrame</span>
<span class="n">max_damage_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">max_damage_data</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;object_type&#39;</span><span class="p">)</span>

<span class="c1"># Display DataFrame</span>
<span class="nb">print</span><span class="p">(</span><span class="n">max_damage_df</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="linking-vulnerability-curves">
<h2>Linking Vulnerability Curves<a class="headerlink" href="#linking-vulnerability-curves" title="Permalink to this heading">#</a></h2>
<p>Each infrastructure type requires a vulnerability curve to determine expected damage based on hazard intensity. Vulnerability curves are hazard-specific and should be reviewed for accuracy. A useful reference is <a class="reference external" href="https://nhess.copernicus.org/articles/24/4341/2024/nhess-24-4341-2024-discussion.html">Nirandjan et al. (2024)</a>, but local validation is necessary.</p>
<p>To facilitate vulnerability curve selection, a predefined dictionary linking OSM categories to damage curves is available in <a class="reference external" href="https://github.com/VU-IVM/DamageScanner/blob/DS1.0/src/damagescanner/base_values.py"><code class="docutils literal notranslate"><span class="pre">base_values.py</span></code></a>. Users can use this as a reference and adjust as needed based on local validation. The code below provides an example how one could add their own defined curves.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="c1"># Define vulnerability curves as a DataFrame</span>
<span class="n">damage_curves_data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;primary&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
    <span class="s1">&#39;secondary&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
    <span class="s1">&#39;tertiary&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># Create DataFrame</span>
<span class="n">depth_levels</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">damage_curves</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">damage_curves_data</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">depth_levels</span><span class="p">)</span>
<span class="n">damage_curves</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s1">&#39;Depth&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">damage_curves</span> <span class="o">=</span> <span class="n">damage_curves</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>

<span class="c1"># Display DataFrame</span>
<span class="nb">print</span><span class="p">(</span><span class="n">damage_curves</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="a-note-on-osm-completeness">
<h2>A Note On OSM Completeness<a class="headerlink" href="#a-note-on-osm-completeness" title="Permalink to this heading">#</a></h2>
<p>OpenStreetMap (OSM) completeness refers to the extent and accuracy of geographic data coverage across various regions. Being aware of the level of completeness is essential for using OSM as a reliable source for exposure analysis in risk assessments. OSM completeness directly affects the quality of damage and risk models. Incomplete datasets can lead to underestimation of exposure, particularly in regions with limited mapping activity. Users should therefore always be careful with using OSM for their area of interest and, if necessary, supplement with local or proprietary data sources. While checking for completeness can be difficult, even qualitative checks (e.g. visually comparing OSM data with satelite imagery) can already help to judge whether data is largely complete or whether parts are missing.</p>
<section id="some-current-insights-on-osm-completeness">
<h3><strong>Some Current Insights on OSM Completeness</strong><a class="headerlink" href="#some-current-insights-on-osm-completeness" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>The <a class="reference external" href="https://wvanderp.github.io/isOsmComplete/">isOSMComplete</a> tool provides visualizations of global OSM coverage, highlighting areas of high and low completeness.</p></li>
<li><p><a class="reference external" href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0180698">Barrington-Leigh &amp; Millard-Ball, 2019</a> found that OSM completeness for road networks exceeds 80% globally, though rural and developing regions show significant gaps.</p></li>
<li><p><a class="reference external" href="https://www.nature.com/articles/s41467-023-39698-6">Herfort et al., 2023</a> evaluated OSM coverage for infrastructure networks and emphasized completeness variations across regions and asset types. For 1,848 urban centres (16% of the urban population), OSM building footprint data exceeds 80% completeness, but completeness remains lower than 20% for 9,163 cities (48% of the urban population).</p></li>
<li><p>The <a class="reference external" href="https://wiki.openstreetmap.org/wiki/Completeness">OSM Wiki on Completeness</a> outlines methodologies for evaluating coverage and identifying areas needing improvement.</p></li>
</ul>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./howto"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="run_locally.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Run Locally</p>
      </div>
    </a>
    <a class="right-next"
       href="using_tailor_data.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Using Local Data</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#downloading-openstreetmap-osm-data">Downloading OpenStreetMap (OSM) Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-the-download-function">Using the <code class="docutils literal notranslate"><span class="pre">download()</span></code> Function</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#example-usage">Example Usage:</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#handling-countries-not-in-the-dictionary">Handling Countries Not in the Dictionary</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#using-geopandas-with-a-bounding-box-simpler-approach"><strong>1. Using GeoPandas with a Bounding Box (Simpler Approach)</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#using-osm-flex-for-advanced-clipping"><strong>2. Using OSM-Flex for Advanced Clipping</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#extracting-data-with-read-osm-data">Extracting Data with <code class="docutils literal notranslate"><span class="pre">read_osm_data()</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-retrieving-road-network-data">Example: Retrieving Road Network Data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-retrieving-building-footprints">Example: Retrieving Building Footprints</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-the-maximum-damage-dataframe">Creating the Maximum Damage DataFrame</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#linking-vulnerability-curves">Linking Vulnerability Curves</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-note-on-osm-completeness">A Note On OSM Completeness</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#some-current-insights-on-osm-completeness"><strong>Some Current Insights on OSM Completeness</strong></a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Institute for Environmental Studies, Vrije Universiteit Amsterdam
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      Â© Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>